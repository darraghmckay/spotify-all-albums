(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports=a(30)},17:function(e,t,a){},18:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),l=a(4),o=a.n(l),d=(a(17),a(18),a(5)),i=a(6),u=a(9),s=a(7),m=a(10),b=a(8),f=a.n(b),h=function(e){var t=e.album;e.createdAt;return c.a.createElement("div",{className:"album"},c.a.createElement("a",{href:t.external_urls.spotify,target:"_blank"},c.a.createElement("img",{src:t.images[0].url})),c.a.createElement("a",{href:t.external_urls.spotify,target:"_blank"},t.name),c.a.createElement("div",{className:"artists"},t.artists.map(function(e,a){return c.a.createElement(c.a.Fragment,{key:e.uri},c.a.createElement("a",{className:"artist",href:e.external_urls.spotify,target:"_blank"},e.name),a<t.artists&&c.a.createElement("span",{className:"artist-divider"},","))})))},v="".concat(document.location.origin,"/"),k={clientId:"ddc2dee973c44bbf8c584dcd0c50e3b7",redirectUri:v},g=new f.a(k),p=g.createAuthorizeURL(["streaming","user-read-birthdate","user-read-email","user-read-private","user-library-read"]).replace("code","token"),y=function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));if(t)return t[2]}("spotify:access_token"),A=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={albums:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(y||document.location.href.includes("access_token")){n=y||document.location.href.match("access_token=([a-zA-Z0-9-_]+)")[1],g.setAccessToken(n),document.location.href!==v&&document.location.replace(v),y||(document.cookie="".concat("spotify:access_token","=").concat(n,"; max-age=3600"));var t={};Promise.all([function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return g.getMySavedTracks({limit:50,offset:a}).then(function(n){return n.body.items.forEach(function(e){if(t[e.track.album.id]){var a=new Date(Math.max(new Date(e.added_at),t[e.track.album.id].addedAt));t[e.track.album.id]={addedAt:a,album:e.track.album}}else t[e.track.album.id]={addedAt:new Date(e.added_at),album:e.track.album}}),n.body.next?e(a+50):void console.log("Albums albums track",Object.keys(t).length,t)})}(),function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return g.getMySavedAlbums({limit:50,offset:a}).then(function(n){return n.body.items.forEach(function(e){if(t[e.album.id]){var a=new Date(Math.max(new Date(e.added_at),t[e.album.id].addedAt));t[e.album.id]={addedAt:a,album:e.album}}else t[e.album.id]={addedAt:new Date(e.added_at),album:e.album}}),n.body.next?e(a+50):void console.log("Albums album",Object.keys(t).length,t)})}()]).then(function(){console.log("All albums gathered",Object.keys(t).length,t);var a=Object.keys(t).sort(function(e,a){return t[a].addedAt-t[e].addedAt}).map(function(e){return t[e]});console.log(a),e.setState({albums:a})})}else document.location=p}},{key:"render",value:function(){var e=this.state.albums;return 0===e.length?c.a.createElement("h1",null,"Loading..."):c.a.createElement("div",null,c.a.createElement("h1",null,"Albums"),c.a.createElement("div",{className:"album-container"},e.map(function(e){var t=e.album,a=e.addedAt;return c.a.createElement(h,{album:t,addedAt:a,key:t.id})})))}}]),t}(r.Component);var E=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(A,null))};o.a.render(c.a.createElement(E,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.9fc3f00a.chunk.js.map